<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Setting up a modern webgl environment - part 2 | Brandon Furtwangler</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In the last post we began to setup a modern javascript build system. If you didn’t read it, you can catch up here:
https://brandf.github.io/2016/10/10/modern-webgl-environment-part1/
In this post we’r">
<meta property="og:type" content="article">
<meta property="og:title" content="Setting up a modern webgl environment - part 2">
<meta property="og:url" content="https://brandf.github.io/2016/10/14/modern-webgl-environment-part2/index.html">
<meta property="og:site_name" content="Brandon Furtwangler">
<meta property="og:description" content="In the last post we began to setup a modern javascript build system. If you didn’t read it, you can catch up here:
https://brandf.github.io/2016/10/10/modern-webgl-environment-part1/
In this post we’r">
<meta property="og:updated_time" content="2016-10-15T02:35:30.845Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Setting up a modern webgl environment - part 2">
<meta name="twitter:description" content="In the last post we began to setup a modern javascript build system. If you didn’t read it, you can catch up here:
https://brandf.github.io/2016/10/10/modern-webgl-environment-part1/
In this post we’r">
  
    <link rel="alternate" href="/atom.xml" title="Brandon Furtwangler" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

  <script type="text/javascript" src="/js/banner.js" defer></script>
</head>

<body>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1662109954081271',
      xfbml      : true,
      version    : 'v2.8'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <iframe id="banner-iframe" style="height: 100%; width: 100%; overflow:hidden;" seamless="seamless" scrolling="no" frameborder="0" allowtransparency="true"></iframe>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Brandon Furtwangler</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">code, drones and more</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://brandf.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-modern-webgl-environment-part2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/14/modern-webgl-environment-part2/" class="article-date">
  <time datetime="2016-10-15T05:52:57.000Z" itemprop="datePublished">2016-10-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Setting up a modern webgl environment - part 2
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In the last post we began to setup a modern javascript build system. If you didn’t read it, you can catch up here:</p>
<p><a href="https://brandf.github.io/2016/10/10/modern-webgl-environment-part1/">https://brandf.github.io/2016/10/10/modern-webgl-environment-part1/</a></p>
<p>In this post we’re going to continue and setup babel, eslint, and editorconfig. At that point you’ll have an awesome environment to create the next great web app.</p>
<p>If you were following along in part 1, you can continue where we left off, otherwise clone this repo to catch up:</p>
<p><a href="https://github.com/brandf/brandf-environment-part1.git" target="_blank" rel="external">https://github.com/brandf/brandf-environment-part1.git</a></p>
<p>The first thing we’re going to do is setup an editor config. This is nice to have in an open source project because you don’t know what editor folks are going to use, and so this is a common way to describe what settings they should use.</p>
<p>Simply create a file named .editorconfig that looks like this:<br><figure class="highlight ini"><figcaption><span>.editorconfig</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># http://EditorConfig.org</span></div><div class="line"><span class="attr">root</span> = <span class="literal">true</span></div><div class="line"><span class="section"></span></div><div class="line">[*]</div><div class="line"><span class="attr">end_of_line</span> = lf</div><div class="line"><span class="attr">insert_final_newline</span> = <span class="literal">true</span></div><div class="line"><span class="attr">trim_trailing_whitespace</span> = <span class="literal">true</span></div><div class="line"><span class="attr">charset</span> = utf-<span class="number">8</span></div><div class="line"><span class="attr">indent_style</span> = space</div><div class="line"><span class="attr">indent_size</span> = <span class="number">2</span></div></pre></td></tr></table></figure></p>
<p>I’m using Visual Studio Code, which doesn’t support .editorconfig out of the box, so I needed to install an extension.  Hit Ctrl+P, and type “ext EditorConfig” to open the extensions. Install “EditorConfig for VS Code”.</p>
<p>Now you can test it out by modifying a file to have a trailing space, or no new line, and see if it trims when you save.</p>
<p>Next let’s install a transpiler called Babel.  Babel lets you write modern javascript, and compile it down to older javascript (most likely ES5).  Babel also acts as a platform for various other language extensions such as JSX (more on this in a future post).</p>
<p>First we need to get the babel package from npm:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; npm install --save-dev babel-core</div></pre></td></tr></table></figure></p>
<p>Now we could kick it off manually, but we already have webpack setup so let’s have webpack run babel on all javascript files as part of the bundling process.</p>
<p>The babel loader module does this for us:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; npm install --save-dev babel-loader</div></pre></td></tr></table></figure></p>
<p>Next we need to setup webpack to use the loader. Add this to the webpack config:<br><figure class="highlight javascript"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  <span class="attr">loaders</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</div><div class="line">      <span class="attr">loaders</span>: [<span class="string">'babel'</span>],</div><div class="line">    &#125;,</div><div class="line">  ],</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>At this point, babel will run, but it doesn’t do much unless we tell it what transformations we want.  To do this, we need a babel config file:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="built_in">echo</span> <span class="string">'&#123; "presets": ["latest"], "plugins": ["transform-runtime"] &#125;'</span> &gt; .babelrc</div></pre></td></tr></table></figure></p>
<p>Next install the package for the preset and plugin:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; npm install babel-preset-latest --save-dev</div><div class="line">&gt; npm install babel-plugin-transform-runtime --save-dev</div></pre></td></tr></table></figure></p>
<p>At the time of this writing, the ‘latest’ preset brings in es2015, es2016, and es2017 language features. The transform plugin is needed to make generators/async work. Now it’s time to write some modern javascript!</p>
<p>Replace your app.js with this:<br><figure class="highlight javascript"><figcaption><span>src/app.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> <span class="keyword">async</span> doIt() &#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">      <span class="keyword">await</span> Foo.delay(<span class="number">1</span>);</div><div class="line">      <span class="built_in">document</span>.body.appendChild(<span class="built_in">document</span>.createTextNode(i));</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">static</span> delay(seconds) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</div><div class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        res();</div><div class="line">      &#125;, seconds * <span class="number">1000</span>);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">Foo.doIt();</div></pre></td></tr></table></figure></p>
<p>The above is just some toy code to exercise javascript classes (from es2015) and async methods (from es2017).</p>
<p>To see it in action, just launch the server<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; npm run start</div></pre></td></tr></table></figure></p>
<p>You can play around with it while the server is running and it will reload every time you save.</p>
<p>Now that we’re writing javascript, we’ll soon get annoyed by simple typos causing bugs that aren’t discovered until runtime. YAY dynamic languages. One way to combat this is with static analysis. Since we already have a build step for bundling, we would like to find out about common mistakes at build time instead of runtime.</p>
<p>eslint is great for this. Not only does it find mistakes like typos, but it also keeps the code clean/consistent by enforcing coding standards such as brace style, naming conventions, etc.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; npm install eslint-loader --save-dev</div></pre></td></tr></table></figure></p>
<p>And then we need to add it to our loaders list.  Make sure it’s the right-most loader so it runs first.<br><figure class="highlight javascript"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  <span class="attr">loaders</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</div><div class="line">      <span class="attr">loaders</span>: [<span class="string">'babel'</span>, <span class="string">'eslint'</span>],</div><div class="line">    &#125;,</div><div class="line">  ],</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>Similar to how we configured babel, we’re going to configure eslint with .eslintrc.  You can use different rules to suit your taste, but the airbnb set are a good starting point.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install eslint-config-airbnb --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight json"><figcaption><span>.eslintrc</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"extends"</span>: <span class="string">"airbnb"</span>,</div><div class="line">  <span class="attr">"rules"</span>: &#123;</div><div class="line">    <span class="attr">"no-plusplus"</span>: <span class="string">"off"</span>,</div><div class="line">    <span class="attr">"no-param-reassign"</span>: [<span class="string">"error"</span>, &#123; <span class="attr">"props"</span>: <span class="literal">false</span> &#125;]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"env"</span>: &#123;</div><div class="line">    <span class="attr">"browser"</span>: <span class="literal">true</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Note that I customized a few rules on top of airbnb.</p>
<p>Now when we build, we will get warnings/errors if our code violates the rules.  At that point you have two options 1) fix the issues 2) override the rule. Sometimes it makes sense to override it because you know what you’re doing and the rule is to prevent something accedental like using | instead of ||.  One way to override it is to do something like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// eslint-disable-next-line no-bitwise</span></div><div class="line">gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);</div></pre></td></tr></table></figure>
<p>Similar to editorconfig, you may want to setup your editor to run eslint. To do that in visual studio code, you type CTRL+P, then “ext ESLint”, and install it.  You may also need to install the package globally</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; npm install eslint -g</div></pre></td></tr></table></figure>
<p>You may need to close/reopen VS Code, and now you’ll get red squiggles every time you violate an eslint rule.  Try adding a space between a function and it’s opening param…bad developer!</p>
<p>That’s all for part 2.  We now have a pretty sophisticated build environment that lets us use the latest language features while still being able to target common browsers. </p>
<p>You can find the end result here: <a href="https://github.com/brandf/brandf-environment-part2.git" target="_blank" rel="external">https://github.com/brandf/brandf-environment-part2.git</a></p>
<p>In part 3 we’ll add some packages to help use WebGL and some babel loaders that help us with CSS and GLSL.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://brandf.github.io/2016/10/14/modern-webgl-environment-part2/" data-id="ciualckmj0002cwnzm35z99gd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/babel/">babel</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/es2015/">es2015</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webgl/">webgl</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/10/10/modern-webgl-environment-part1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Setting up a modern webgl environment - part 1</div>
    </a>
  
</nav>

  
</article>


<div class="fb-comments" data-href="https://brandf.github.io/2016/10/14/modern-webgl-environment-part2/" data-numposts="10" data-width="800"></div>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">Coding</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/babel/">babel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es2015/">es2015</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webgl/">webgl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/babel/" style="font-size: 10px;">babel</a> <a href="/tags/es2015/" style="font-size: 10px;">es2015</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/webgl/" style="font-size: 10px;">webgl</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/10/14/modern-webgl-environment-part2/">Setting up a modern webgl environment - part 2</a>
          </li>
        
          <li>
            <a href="/2016/10/10/modern-webgl-environment-part1/">Setting up a modern webgl environment - part 1</a>
          </li>
        
          <li>
            <a href="/2016/10/02/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Brandon Furtwangler<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>